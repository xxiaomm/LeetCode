
### Link

https://leetcode.com/problems/populating-next-right-pointers-in-each-node-ii/

### Clarifications / Constraints

1. root == null -> return null

### Idea_1

1. Use level taversal;
2. Use queue to store the nodes of every level;
3. For every level, implement ```for``` loop to traverse every node;
   1. if the current is not the last, its next pointer should point to the next node;
   2. else: point to ```null```;


#### Code

```java
// same as LeetCode 116
class Solution {
    public Node connect(Node root) {
        if (root == null) return root;
        Queue<Node> q = new ArrayDeque<>();
        q.offer(root);
        while (!q.isEmpty()) {
            int size = q.size();
            for (int i = 0; i < size; i++) {
                Node n = q.poll();
                if (i == size - 1) n.next = null;
                else n.next = q.peek();
                if (n.left != null) q.offer(n.left);
                if (n.right != null) q.offer(n.right);
            }
        }
        return root;
    }
}
```

#### Complexity

Time complexity: O(n), traverse every node in the tree;    
Space complexity: O(n), the maximum number is the number of leafs: n/2;


### Idea_2(复习)

1. Use dummy node and next pointer, We establish the next pointers for a level N while we are still on level N-1;
2. At the beginning, let ```curr = root```, then implement ```while``` loop if ```curr != null```;
3. While finding the ```leftmost``` node, let ```dummy.next = leftmost```, and use ```pre = dummy```, move ```pre``` if there are pultiple nodes int the current level;
4. Traverse the current level:
   1. if it has left: ```pre.next = curr.left```;
   2. if it has right: ```pre.next = curr.right```;
   3. then move ```pre``` and ```curr```, but if ```curr.next == null```: the current level finished, we need to initialize ```curr, pre, and dummy```;


#### Code

```java
// dummy的使用！！！！
class Solution {
    public Node connect(Node root) {
        if (root == null) return root;
        Node dummy = new Node(-1);
        Node pre = dummy, curr = root;
        while (curr != null) {
            if (curr.left != null) {
                pre.next = curr.left;
                pre = pre.next;
            }
            if (curr.right != null) {
                pre.next = curr.right;
                pre = pre.next;
            }
            if (curr.next != null) 
                curr = curr.next;
            else {
                curr = dummy.next;  // move to next level
                pre = dummy;
                dummy.next = null;
            }
        }
        return root;
    }
}


```

#### Complexity

Time complexity: O(n), traverse every node in the tree;    
Space complexity: O(1); 
