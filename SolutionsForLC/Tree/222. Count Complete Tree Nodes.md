
### Link

https://leetcode.com/problems/count-complete-tree-nodes/

### Clarifications / Constraints

1. 

### Idea_1

1. 


#### Code

```java
class Solution {
    public int countNodes(TreeNode root) {
        if (root == null) return 0;
        int leftDepth = getDepth(root.left);    // O(logn)
        int rightDepth = getDepth(root.right);  // O(logn)
        
        if (leftDepth == rightDepth)
            // 左右depth相等=> 左子树是个完全二叉树, root+左子树的数量 = 1 << leftDepth
            return countNodes(root.right) + (1 << leftDepth);
        else 
            // 左右depth不等 => 右子树是个完全二叉树, root+右子树的数量 = 1 << rightDepth
            return countNodes(root.left) + (1 << rightDepth);
    }
    // O(logn)
    public int getDepth(TreeNode root) {
        if (root == null) return 0;
        // 完全二叉树, 左子树的depth一定 >= 右子树的depth
        return 1 + getDepth(root.left); 
    }
}
```

#### Complexity

Time complexity: 
O(logn + logn - 1 + logn - 2 + ... + 2 + 1)从1加到logn = O( n(n+1)/2 ) = O( logn(logn+1)/2 ) = O(logn * logn);  
Space complexity: O(height);

